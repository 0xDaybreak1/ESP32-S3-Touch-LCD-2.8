[env:esp32-s3-devkitc-1]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200
; 硬件特性配置
board_build.arduino.memory_type = qio_opi ; 针对 8MB PSRAM (N8R8)
board_build.f_cpu = 240000000L
board_build.partitions = huge_app.csv

; 核心编译标志
build_flags = 
    -D BOARD_HAS_PSRAM
    -D ARDUINO_USB_CDC_ON_BOOT=1
    ; TFT_eSPI 硬件定义 (直接在此处定义，无需修改库文件，更易于版本管理)
    -D USER_SETUP_LOADED=1
    -D ST7789_DRIVER=1
    -D TFT_WIDTH=240
    -D TFT_HEIGHT=320
    -D TFT_RGB_ORDER=TFT_BGR
    -D TFT_INVERSION_ON
    -D TFT_MOSI=11
    -D TFT_SCLK=12
    -D TFT_CS=10
    -D TFT_DC=9
    -D TFT_RST=14
    -D SPI_FREQUENCY=80000000 ; S3 支持到 80MHz，建议先从 40MHz 测试稳定性

lib_deps = 
    bodmer/TFT_eSPI @ ^2.5.43
    bodmer/TJpg_Decoder @ ^1.1.0
    bitbank2/PNGdec @ ^1.0.1
    https://github.com/greiman/SdFat.git ; 推荐使用 SdFat 库以获得更佳的 SDIO/SPI 性能
  ; 使用活跃维护的社区版，修复了大量内存泄漏和 S3 兼容性问题
    mathieucarbou/AsyncTCP @ ^3.2.4
    mathieucarbou/ESPAsyncWebServer @ ^3.1.5
    bblanchon/ArduinoJson @ ^7.2.1
# 🎨 色温调节功能 - 用户使用指南

## 📖 功能介绍

色温调节功能允许您通过 Web 界面实时调整显示图片的色温，让图片呈现暖色调或冷色调效果。

### 什么是色温？

- **暖色调**（偏红）：适合营造温馨、舒适的氛围
- **冷色调**（偏蓝）：适合营造清爽、专业的氛围
- **默认**（原始颜色）：保持图片原有的色彩

---

## 🚀 快速开始

### 1. 打开 Web 控制台

在浏览器中访问：
- `http://vision.local` （推荐，需要支持 mDNS）
- 或直接输入 ESP32 的 IP 地址（在屏幕上显示）

### 2. 找到色温调节控件

在 Web 控制台页面中，您会看到一个标有"色温调节"的滑块控件。

### 3. 调节色温

- **向右拖动**：增加暖色调（偏红）
- **向左拖动**：增加冷色调（偏蓝）
- **居中位置**：恢复原始颜色

### 4. 实时预览

拖动滑块后，当前显示的图片会自动重新渲染，您可以立即看到色温调节的效果。

---

## 🎯 使用场景

### 场景 1：照片展示

**需求**：展示家庭照片，希望营造温馨氛围

**操作**：
1. 上传家庭照片到 ESP32
2. 将色温滑块向右拖动到 +50 左右
3. 照片会呈现温暖的色调

### 场景 2：艺术作品展示

**需求**：展示艺术作品，希望保持原始色彩

**操作**：
1. 上传艺术作品图片
2. 将色温滑块保持在 0（居中位置）
3. 图片保持原始色彩

### 场景 3：产品展示

**需求**：展示产品图片，希望呈现专业、清爽的感觉

**操作**：
1. 上传产品图片
2. 将色温滑块向左拖动到 -30 左右
3. 图片会呈现清爽的冷色调

---

## 📊 色温值参考

| 色温值 | 效果 | 适用场景 |
|-------|------|---------|
| -100 | 极冷（强烈偏蓝） | 冰雪主题、科技感展示 |
| -50 | 冷色调（偏蓝） | 产品展示、专业场景 |
| 0 | 原始颜色 | 艺术作品、真实还原 |
| +50 | 暖色调（偏红） | 家庭照片、温馨场景 |
| +100 | 极暖（强烈偏红） | 日落主题、怀旧风格 |

---

## 💡 使用技巧

### 技巧 1：根据环境光调节

- **白天/明亮环境**：可以使用较冷的色温（-20 到 -50）
- **夜晚/昏暗环境**：可以使用较暖的色温（+20 到 +50）

### 技巧 2：根据图片内容调节

- **风景照片**：尝试 -30 到 +30 之间的微调
- **人像照片**：建议使用 +20 到 +50 的暖色调
- **黑白照片**：色温调节效果不明显

### 技巧 3：批量调节

如果您有多张图片需要相同的色温效果：
1. 先调节好一张图片的色温
2. 记住色温值（显示在滑块旁边）
3. 切换到其他图片时，设置相同的色温值

---

## ⚙️ 高级设置

### 自定义色温预设

您可以在代码中定义常用的色温预设：

```cpp
// 在 WebServer_Driver.cpp 中添加预设按钮
// 暖色预设
ColorTemp_SetOffset(50);

// 冷色预设
ColorTemp_SetOffset(-50);

// 恢复默认
ColorTemp_SetOffset(0);
```

### 色温动画效果

如果您想实现色温渐变动画：

```cpp
// 从当前色温渐变到目标色温
void animateColorTemp(int8_t targetTemp, uint16_t duration) {
    int8_t currentTemp = ColorTemp_GetOffset();
    int8_t step = (targetTemp > currentTemp) ? 1 : -1;
    uint16_t delayTime = duration / abs(targetTemp - currentTemp);
    
    while (currentTemp != targetTemp) {
        currentTemp += step;
        ColorTemp_SetOffset(currentTemp);
        delay(delayTime);
    }
}
```

---

## 🐛 常见问题

### Q1：色温调节后图片没有变化？

**A**: 请检查以下几点：
1. 确认当前有图片正在显示
2. 查看串口日志，确认色温设置成功
3. 尝试刷新浏览器页面

### Q2：色温效果不明显？

**A**: 可能的原因：
1. 图片本身色彩饱和度较低
2. 色温偏移量太小，尝试更大的值（如 ±80）
3. 黑白图片对色温调节不敏感

### Q3：色温调节后图片显示变慢？

**A**: 这是正常现象：
- 色温调节会增加 5-8ms 的处理时间
- 如果图片较大或格式复杂，可能会有轻微延迟
- 建议使用 240x320 的 Baseline JPEG 格式以获得最佳性能

### Q4：如何恢复默认色温？

**A**: 有两种方法：
1. 将滑块拖动到居中位置（0）
2. 刷新浏览器页面（色温会重置为 0）

---

## 📱 移动端使用

色温调节功能完全支持移动端浏览器：

1. 在手机浏览器中打开 Web 控制台
2. 使用手指拖动滑块调节色温
3. 支持触摸手势，操作流畅

---

## 🎨 创意应用

### 应用 1：动态氛围灯

结合 RGB LED 灯珠和色温调节，创造动态氛围：
- 早晨：冷色调图片 + 蓝色 LED
- 中午：原始色温 + 白色 LED
- 傍晚：暖色调图片 + 橙色 LED
- 夜晚：暖色调图片 + 红色 LED

### 应用 2：主题切换

根据不同主题自动调节色温：
- 春天主题：+20（温暖）
- 夏天主题：-20（清爽）
- 秋天主题：+40（温馨）
- 冬天主题：-40（冷峻）

### 应用 3：情绪表达

使用色温表达不同情绪：
- 快乐：+50（温暖明亮）
- 平静：0（自然舒适）
- 忧郁：-50（冷静深沉）

---

## 📞 技术支持

如果您在使用过程中遇到问题，请：

1. 查看串口日志获取详细信息
2. 参考 [故障排查文档](./Image_Decoder_notes.md#故障排查)
3. 检查 [集成报告](./ColorTemp_Integration_Complete.md)

---

## 🎉 享受您的色温调节体验！

色温调节功能为您的图片展示增添了更多可能性。尽情探索不同的色温设置，找到最适合您的视觉效果！

---

**文档版本**: v1.0  
**创建时间**: 2026-02-25  
**适用对象**: 终端用户  
**创建者**: Kiro
